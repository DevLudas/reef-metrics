---
import { UserMenu } from "./ui/UserMenu";
import { Image } from "astro:assets";
import logo from "@/assets/logo.png";

// Get authenticated user from middleware
const { user } = Astro.locals;
const userName = user?.email || "Guest";
---

<header class="sticky top-0 z-50 w-full border-b border-gray-200 bg-white">
  <div class="container mx-auto px-4">
    <nav class="flex h-16 items-center justify-between">
      <!-- Logo and brand name -->
      <a href="/dashboard" class="flex items-center gap-1 hover:opacity-80 transition-opacity">
        <Image src={logo} alt="ReefMetrics Logo" class="h-8 w-auto" />
        <span class="text-xl font-bold text-gray-900">ReefMetrics</span>
      </a>

      <!-- User menu -->
      <UserMenu client:load userName={userName} />
    </nav>
  </div>
</header>
